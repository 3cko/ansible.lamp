---

- name: Include common.yml
  include: common.yml

- name: Install packages for Redhat
  yum: name=holland-mysqldump state=present
  when: ansible_os_family == 'RedHat'


- name: Download holland-mysqldump.deb
  copy: src=holland-mysqldump_{{holland_version}}_all.deb dest=/tmp/holland-mysqldump_{{holland_version}}_all.deb
  when: ansible_os_family == 'Debian'
  register: deb_mysqldump_dl

- name: Install .deb file
  dpkg: deb=/tmp/holland-mysqldump_{{holland_version}}_all.deb state=present
  when: ansible_os_family == 'Debian' and deb_mysqldump_dl|changed
  register: deb_mysqldump_installed

- name: Cleanup .deb file
  file: dest=/tmp/holland-mysqldump_{{holland_version}}_all.deb state=absent
  when: ansible_os_family == 'Debian' and deb_mysqldump_installed|changed


